import {useRef,useState,useEffect,useCallback}from'react';import {Pause,Play,SkipBack,SkipForward,VolumeX,Volume2,Minimize,Maximize}from'lucide-react';import {jsxs,jsx}from'react/jsx-runtime';var be=({src:I,poster:X,autoPlay:B=false,loop:j=false,muted:p=false,controls:q=true,width:J="100%",height:C="auto",onPlay:u,onPause:d,onEnded:m,onTimeUpdate:v,className:A=""})=>{let n=useRef(null),N=useRef(null),[c,g]=useState(false),[h,P]=useState(0),[s,G]=useState(0),[i,k]=useState(p?0:1),[y,T]=useState(p),[R,K]=useState(false),[O,M]=useState(true),[Q,W]=useState(1),[w,V]=useState(false),E=useRef(null),x=useRef(null);useEffect(()=>{let e=n.current;if(!e)return;let o=()=>G(e.duration),r=()=>{P(e.currentTime),v==null||v(e.currentTime);},S=()=>{g(true),u==null||u();},$=()=>{g(false),d==null||d();},H=()=>{g(false),m==null||m();};return e.addEventListener("loadedmetadata",o),e.addEventListener("timeupdate",r),e.addEventListener("play",S),e.addEventListener("pause",$),e.addEventListener("ended",H),()=>{e.removeEventListener("loadedmetadata",o),e.removeEventListener("timeupdate",r),e.removeEventListener("play",S),e.removeEventListener("pause",$),e.removeEventListener("ended",H);}},[u,d,m,v]),useEffect(()=>{let e=()=>{K(!!document.fullscreenElement);};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);let D=()=>{n.current&&(c?n.current.pause():n.current.play());},b=useCallback(e=>{if(x.current&&n.current){let o=x.current.getBoundingClientRect(),r=Math.max(0,Math.min(1,(e-o.left)/o.width));n.current.currentTime=r*s,P(r*s);}},[s]),Y=e=>{b(e.clientX);},Z=e=>{V(true),b(e.clientX);};useEffect(()=>{let e=r=>{w&&b(r.clientX);},o=()=>{V(false);};return w&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",o)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",o);}},[w,b]);let _=e=>{let o=parseFloat(e.target.value);k(o),T(o===0),n.current&&(n.current.volume=o,n.current.muted=o===0);},U=()=>{if(n.current){let e=!y;if(T(e),n.current.muted=e,e)k(0),n.current.volume=0;else {let o=i===0?1:i;k(o),n.current.volume=o;}}},ee=()=>{var e;document.fullscreenElement?document.exitFullscreen():(e=N.current)==null||e.requestFullscreen();},te=()=>{document.fullscreenElement&&document.exitFullscreen();},z=e=>{n.current&&(n.current.currentTime=Math.max(0,Math.min(s,h+e)));},ne=e=>{W(e),n.current&&(n.current.playbackRate=e);},F=e=>{let o=Math.floor(e/60),r=Math.floor(e%60);return `${o}:${r.toString().padStart(2,"0")}`},oe=()=>{M(true),E.current&&clearTimeout(E.current),c&&(E.current=setTimeout(()=>{M(false);},3e3));},re=()=>{c&&M(false);};return jsxs("div",{ref:N,className:`relative bg-black ${A}`,style:{width:J,height:C==="auto"?void 0:C},onMouseMove:oe,onMouseLeave:re,children:[jsx("video",{ref:n,src:I,poster:X,autoPlay:B,loop:j,muted:p,className:"w-full h-full object-cover",onClick:D,onDoubleClick:te}),q&&jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 transition-opacity duration-300 ${O?"opacity-100":"opacity-0"}`,children:[jsx("div",{ref:x,className:"w-full h-1 bg-gray-600 rounded cursor-pointer mb-3 group",onClick:Y,onMouseDown:Z,children:jsx("div",{className:"h-full bg-white rounded relative transition-colors",style:{width:`${h/s*100}%`},children:jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})})}),jsxs("div",{className:"flex items-center justify-between",children:[jsxs("div",{className:"flex items-center gap-3",children:[jsx("button",{onClick:D,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-all","aria-label":c?"Pause":"Play",children:c?jsx(Pause,{size:24}):jsx(Play,{size:24})}),jsx("button",{onClick:()=>z(-10),className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-all","aria-label":"Skip backward 10 seconds",children:jsx(SkipBack,{size:20})}),jsx("button",{onClick:()=>z(10),className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-all","aria-label":"Skip forward 10 seconds",children:jsx(SkipForward,{size:20})}),jsx("div",{className:"group relative",children:jsxs("div",{className:"flex items-center gap-3 px-2 py-2 rounded-full bg-black/50 hover:bg-black/70 transition-all overflow-hidden",children:[jsx("button",{onClick:U,className:"text-white flex-shrink-0","aria-label":y?"Unmute":"Mute",children:y||i===0?jsx(VolumeX,{size:20}):jsx(Volume2,{size:20})}),jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:_,className:"w-0 group-hover:w-20 transition-all duration-300 accent-white cursor-pointer","aria-label":"Volume",style:{background:`linear-gradient(to right, white ${i*100}%, rgba(255,255,255,0.3) ${i*100}%)`}})]})}),jsx("div",{className:"flex items-center gap-1 ml-4",children:[.5,1,1.5,2].map(e=>jsxs("button",{onClick:()=>ne(e),className:`px-3 py-1 rounded-full text-white text-sm transition-all ${Q===e?"bg-white/30 font-bold":"bg-black/50 hover:bg-black/70"}`,"aria-label":`Playback speed ${e}x`,children:[e,"x"]},e))}),jsxs("span",{className:"text-white text-sm",children:[F(h)," / ",F(s)]})]}),jsx("button",{onClick:ee,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-all","aria-label":R?"Exit fullscreen":"Enter fullscreen",children:R?jsx(Minimize,{size:20}):jsx(Maximize,{size:20})})]})]})]})},fe=be;export{fe as default};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map